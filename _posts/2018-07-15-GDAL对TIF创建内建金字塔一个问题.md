---
layout:  post
title:  "GDAL对TIF创建内建金字塔一个问题"
date:  2018-07-15
categories:  地理信息
tags:  地理信息
comments: 1
---

[TOC]
[博客园文章地址 http://www.cnblogs.com/oloroso/archive/2018/07/15/9313339.html](http://www.cnblogs.com/oloroso/archive/2018/07/15/9313339.html)
gdalwarp输出tif图像的时候，默认如果没有使用`BIGTIFF=YES`选项，则会根据输出影像的大小进行判断，低于4G则不适用bigtiff格式。
对于非bigtiff图像，如果这时候使用gdaladdo创建金字塔（内建模式），如果出现了文件总大小超过4G的情况，则会导致图像文件出错。
gdaladdo会输出相关信息，但不会终止金字塔的创建，于是导致金字塔是黑色的。
```
C:\Program Files\GDAL>gdaladdo D:\data\fs\ID_Guangdong.shp.tif 2 4 8 16 32 64 128
0...10...20...30..ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
ERROR 1: An error occurred while writing a dirty block from GDALRasterBand::RasterIO
ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded. Use BIGTIFF=YES creation option.
ERROR 1: WriteEncodedTile/Strip() failed.
.40...50...60...70...80...90...100 - done.
```